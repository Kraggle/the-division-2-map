import{jQuery as $}from"./js/jQuery/jquery3.4.1.js";import"./js/jQuery/jQuery-UI/importer.js";import"./js/jquery-kraggle.js";import{K}from"./js/K.js";import{L}from"./js/Leaflet/importer.js";import"./js/extensions/K.Extended.js";import"./js/extensions/L.Draw.Extended.js";import"./js/extensions/L.Extended.js";import"./js/tools/marker.js";import"./js/tools/layer.js";import{doDonator,doLogin,doRegister,doReset,doForgot}from"./js/functions/account.js";import"./js/functions/complete.js";import"./js/functions/context-menu.js";import"./js/functions/cycle.js";import"./js/functions/map.js";import{toggleFullScreen,onZoomEnd,polyHoverAnimation}from"./js/functions/misc.js";import"./js/functions/search.js";import"./js/functions/share.js";import"./js/functions/shortcut.js";import"./js/functions/uri-tasks.js";import pageLoad from"./js/functions/page-load.js";K.loadStyles(["./js/Leaflet/leaflet1.0.3.css","./js/jQuery/jquery-ui1.12.1.css","./js/Utility/huebee.css","./js/Leaflet/Draw/leaflet.draw.css","./js/Utility/jquery.qtip.css","./index.css"]),K.local("mode")&&!K.has(K.local("mode"),["normal","Story"])&&K.has(K.local("mode"),K.modes.get)||K.local("mode","Story Mode"),$(function(){K.includeHTML(),K.initMap(),$.ajax({url:"docs/credits.html"}).done(function(e){K.credits=e}),K.tool.marker.fill(),$.ajax({url:"php/map_date.php"}).done(function(e){K.mapVersion=e,L.imageOverlay(`images/map.svg?v=${K.mapVersion}`,[[15,-15],[-15,15]],{attribution:'<a title="Tom Clancy\'s The Division 2" href="https://tomclancy-thedivision.ubisoft.com/">The Division 2</a>',pane:"mapPane"}).addTo(K.myMap)}),K.myMap.addLayer(K.group.mode.groupAll),K.myMap.on("zoomend moveend",function(){onZoomEnd(),K.local("zoom",K.myMap.getZoom()),K.local("pan",K.myMap.getCenter()),polyHoverAnimation()});const e=$(".map-mode-box"),o=$(".map-mode",e).detach();K.each(K.modes.get,function(t,s){const a=o.clone();$("img",a).attr("src",`images\\mode-${s.toLowerCase().replace(/ /g,"-")}.svg`),$("span",a).text(s),a.attr("mode",s),e.append(a),s==K.mode&&a.addClass("active")});const t=function(){let e=0;$(".map-mode").each(function(){$(this).hasClass("active")?$(this).css("top",0):(e++,$(this).css("top",45*e+"px"))})};t(),$(".map-mode").on("click",function(){e.hasClass("active")?($(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),t(),K.mode=$(this).attr("mode"),K.local("mode",K.mode),K.group.mode=K.group.feature[K.mode],!K.bar.b.power||K.bar.b.power.enabled()||(K.check.doOnce=!0),setTimeout(()=>{pageLoad()},1e3)),e.removeClass("active")):e.addClass("active")}),$("#side-bar .side-menu-toggle:not(.mode):not(.full)").on("click",function(){let e=$("#side-bar"),o="active",t=$(this).attr("button"),s=K.local("sideMenu");$(this).hasClass(o)?(e.removeClass(`${o} ${t}`),setTimeout(function(){e.children().removeClass(o)},1e3)):e.hasClass(o)?(e.removeClass(`${o} ${s}`),setTimeout(function(){e.children().removeClass(o),e.addClass(`${o} ${t}`),e.children(`.${t}`).addClass(o)},1e3)):(e.addClass(`${o} ${t}`),e.children(`.${t}`).addClass(o)),K.local("sideBar",e.hasClass(o)),K.local("sideMenu",t)}),$("#side-bar > a").each(function(e){$(this).css("top",0==e?"10px":10+40*e+"px")});let s=$("#side-bar .side-menu-toggle.full");s.on("click",toggleFullScreen),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){s.toggleClass("yes")}),K.urlParam("overwolf")||K.local("currentUpdate")==K.currentUpdate||(K.local("sideMenu","changes"),K.local("sideBar",!0),K.local("currentUpdate",K.currentUpdate)),$("#side-bar .login").on("click",".page",function(){let e=$(this).attr("name");$.ajax({url:`php/${e}.php`}).done(function(e){e&&$("#side-bar .login .side-content").html(e)})}),$("#side-bar").on("click","#regform .button",doRegister),$("#side-bar").on("keypress","#regform .input",function(e){13==e.which&&doRegister()}),$("#side-bar").on("click","#donate.button",doDonator),$("#side-bar").on("keypress","#donator",function(e){13==e.which&&doDonator()}),$("#side-bar").on("click","#login .button",doLogin),$("#side-bar").on("keypress","#login .input",function(e){13==e.which&&doLogin()}),$("#side-bar").on("click","#reset .button",doReset),$("#side-bar").on("keypress","#reset .input",function(e){13==e.which&&doReset()}),$("#side-bar").on("click","#forgot .button",doForgot),$("#side-bar").on("keypress","#forgot .input",function(e){13==e.which&&doForgot()}),$("form").submit(function(){return!1}),$("#side-bar").on("click","#logout",function(){$.ajax({url:"php/logout.php"}).done(function(e){K.user.name=!1,K.user.type=0,K.user.data=!1,$("#side-bar .login .side-content").html(e),pageLoad()})}),$("#side-bar").on("click","#rem-check",function(){$.ajax({type:"POST",url:"php/validator.php",data:{checked:$(this).prop("checked")}})}),$(document).mousedown(function(e){if(K.check.grabbing)return;const o=$(".settings-divider, .switch-active-group, #slider-box, .group-switch, .context-menu");o.is(e.target)||0!==o.has(e.target).length||$(o).remove(),$(".map-mode-box").hasClass("active")&&!$(e.target).hasClass("map-mode")&&$(".map-mode-box").removeClass("active")}),$("#side-bar").on("focus",".login .input",function(){$("."+$(this).attr("name")).show(500)}).on("blur",".login .input",function(){$("."+$(this).attr("name")).hide(500)}).on("propertychange change click keyup input paste",".login .input",function(){let e=$(this),o=e.attr("id"),t=e.val(),s=!1;"email"==o||"donator"==o?s=t.bMatch(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/):"username"==o?s=t.bMatch(/^\w+$/):"password"==o?s=t.bMatch(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/):"confirmpwd"==o&&(s=t==$("#password").val()),e.addClass("incorrect"),s&&e.removeClass("incorrect")}),$("#side-bar .side-menu-toggle").on("mouseenter touchstart",function(){$(this).css("left","-"+($(this).width()+50)+"px")}).on("mouseleave touchmove click",function(){$(this).css("left","-35px")}),void 0!==K.local("powered")&&(K.check.doOnce=!K.local("powered")),"string"==K.type(K.urlParam("d"))&&$.ajax({type:"POST",url:"php/process_donator.php",data:{load:K.urlParam("d")}}).done(function(){window.location.href=window.location.href.split("?")[0]}),pageLoad()});
//# sourceMappingURL=index.js.map
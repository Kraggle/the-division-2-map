{"version":3,"sources":["Draw.Polyline.js"],"names":["L","Draw","Polyline","Feature","extend","statics","TYPE","Poly","options","allowIntersection","repeatMode","drawError","color","timeout","icon","DivIcon","iconSize","Point","className","touchIcon","guidelineDistance","maxGuideLineLength","shapeOptions","stroke","weight","opacity","fill","clickable","metric","feet","nautic","showLength","zIndexOffset","initialize","map","Browser","touch","this","message","drawLocal","draw","handlers","polyline","error","Util","type","prototype","call","addHooks","_map","_markers","_markerGroup","LayerGroup","addLayer","_poly","_tooltip","updateContent","_getTooltipText","_mouseMarker","marker","getCenter","divIcon","iconAnchor","on","_onMouseOut","_onMouseMove","_onMouseDown","_onMouseUp","addTo","_onZoomEnd","_onTouch","removeHooks","_clearHideErrorTimeout","_cleanUpShape","removeLayer","off","_clearGuides","deleteLastVertex","length","lastMarker","pop","poly","latlngs","getLatLngs","latlng","splice","setLatLngs","_vertexChanged","addVertex","newLatLngIntersects","_showErrorTooltip","_errorShown","_hideErrorTooltip","push","_createMarker","addLatLng","completeShape","_fireCreatedEvent","disable","enable","_finishShape","_defaultShape","intersects","_shapeIsValid","_updateGuide","e","newPos","mouseEventToLayerPoint","originalEvent","layerPointToLatLng","_currentLatLng","_updateTooltip","setLatLng","DomEvent","preventDefault","added","fire","Event","DRAWVERTEX","layers","_updateFinishHandler","_updateRunningMeasure","_clickHandled","_touchHandled","_disableMarkers","_disableNewMarkers","clientX","clientY","_startPoint","_mouseDownOrigin","point","_endPoint","dragCheckDistance","distanceTo","_calculateFinishDistance","Math","abs","window","devicePixelRatio","_enableNewMarkers","touches","potentialLatLng","lastPtDistance","finishMarker","Polygon","Infinity","lastMarkerPoint","latLngToContainerPoint","getLatLng","potentialMarker","Marker","potentialMarkerPint","markerCount","latLngToLayerPoint","_drawGuide","latLng","text","updatePosition","pointA","pointB","fraction","dashPoint","dash","floor","sqrt","pow","x","y","i","_guidesContainer","DomUtil","create","_overlayPane","style","backgroundColor","setPosition","_updateGuideColor","l","childNodes","firstChild","removeChild","labelText","distanceStr","tooltip","start","_getMeasurementString","cont","subtext","end","previousMarkerIndex","distance","markersLength","_measurementRunningTotal","currentLatLng","previousLatLng","GeometryUtil","readableDistance","showAsError","setStyle","_hideErrorTimeout","setTimeout","bind","removeError","clearTimeout"],"mappings":"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","file":"Draw.Polyline.js"}
import{jQuery as $}from"./js/jQuery/jquery3.4.1.js";window.$=$;import"./js/jQuery/jQuery-UI/importer.js";import"./js/jquery-kraggle.js";import{K}from"./js/K.js";window.K=K;import{L}from"./js/Leaflet/importer.js";window.L=L;import"./js/extensions/K.Extended.js";import"./js/extensions/L.Draw.Extended.js";import"./js/extensions/L.Extended.js";import"./js/tools/marker.js";import"./js/tools/layer.js";import{doDonator,doLogin,doRegister,doReset,doForgot,loadReset}from"./js/functions/account.js";import"./js/functions/complete.js";import"./js/functions/context-menu.js";import"./js/functions/cycle.js";import"./js/functions/map.js";import{toggleFullScreen,onZoomEnd,polyHoverAnimation}from"./js/functions/misc.js";import"./js/functions/search.js";import"./js/functions/share.js";import"./js/functions/shortcut.js";import"./js/functions/uri-tasks.js";import"./js/functions/level.js";import"./js/functions/done.js";import"./js/functions/map-loader.js";import pageLoad from"./js/functions/page-load.js";K.loadStyles(["./js/Leaflet/leaflet1.5.1.css","./js/jQuery/jquery-ui1.12.1.css","./js/Utility/huebee.css","./js/Leaflet/Draw/leaflet.draw.css","./js/Utility/jquery.qtip.css","./index.css"]),!K.local("mode")||!K.has(K.local("mode"),K.modes.get)&&K.local("mode","Story Mode"),!K.local("copyRefresh")&&(K.local("copyRefresh",!0),K.localRemove("copy")),$(function(){K.touchOnly=window.matchMedia("(any-hover: none)").matches,K.includeHTML(),K.initMap(),$.ajax({url:"docs/credits.html"}).done(function(o){K.credits=o}),K.tool.marker.fill(),K.mapLoader(),K.myMap.addLayer(K.group.mode.groupAll),K.myMap.on("zoomend moveend",function(){onZoomEnd(),K.local("zoom",K.myMap.getZoom()),K.local("pan",K.myMap.getCenter()),polyHoverAnimation()}),$("#side-bar .bar-toggle:not(.full)").on("click",function(){const o=$("#side-bar"),e="active",t=".bar-toggle.active, .bar-box.active",s=$(this).attr("button"),n=K.local("sideMenu"),a=()=>{K.local("sideBar",o.hasClass(e)),K.local("sideMenu",s)};$(this).hasClass(e)?(o.removeClass(`${e} ${s}`),setTimeout(function(){$(t+", .bar-toggle-wrap",o).removeClass(e),a()},1e3)):o.hasClass(e)?(o.removeClass(`${e} ${n}`),setTimeout(function(){$(t,o).removeClass(e),o.addClass(`${e} ${s}`),$(`.${s}`,o).addClass(e),a()},1e3)):(o.addClass(`${e} ${s}`),$(`.${s}`,o).addClass(e),a())}),$(".bar-open").on("click",function(){$(".bar-toggle-wrap").toggleClass("active")}),$("#side-bar .bar-toggle").each(function(o){$(this).css("top",0==o?"10px":10+40*o+"px")});let o=$("#side-bar .bar-toggle.full");o.on("click",toggleFullScreen),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){o.toggleClass("yes")}),K.urlParam("overwolf")||K.local("currentUpdate")==K.currentUpdate||(K.local("sideMenu","changes"),K.local("sideBar",!0),K.local("currentUpdate",K.currentUpdate)),$("#side-bar .login").on("click",".page",function(){let o=$(this).attr("name");$.ajax({url:`php/${o}.php`}).done(function(o){o&&$("#side-bar .login .box-content").parent().html(o)})}),K.urlParam("forgot")&&loadReset(K.urlParam("token")),$("#side-bar").on("click","#regform .button",doRegister),$("#side-bar").on("keypress","#regform .input",function(o){13==o.which&&doRegister()}),$("#side-bar").on("click","#donate.button",doDonator),$("#side-bar").on("keypress","#donator",function(o){13==o.which&&doDonator()}),$("#side-bar").on("click","#login .button",doLogin),$("#side-bar").on("keypress","#login .input",function(o){13==o.which&&doLogin()}),$("#side-bar").on("click","#reset .button",doReset),$("#side-bar").on("keypress","#reset .input",function(o){13==o.which&&doReset()}),$("#side-bar").on("click","#forgot .button",doForgot),$("#side-bar").on("keypress","#forgot .input",function(o){13==o.which&&doForgot()}),$("form").submit(function(){return!1}),$("#side-bar").on("click","#logout",function(){$.ajax({url:"php/logout.php"}).done(function(o){K.user.name=!1,K.user.type=0,K.user.data=!1,$("#side-bar .login .box-content").parent().html(o),pageLoad()})}),$("#side-bar").on("click","#rem-check",function(){$.ajax({type:"POST",url:"php/validator.php",data:{checked:$(this).prop("checked")}})}),$(document).on("mousedown touchstart",function(o){if(K.check.grabbing)return;const e=$(".settings-divider, .switch-active-group, #slider-box, .group-switch, .context-menu");e.is(o.target)||0!==e.has(o.target).length||$(e).remove(),$(".map-mode-box").hasClass("active")&&!$(o.target).hasClass("map-mode")&&$(".map-mode-box").removeClass("active")}),$("#side-bar").on("focus",".login .input",function(){$("."+$(this).attr("name")).show(500)}).on("blur",".login .input",function(){$("."+$(this).attr("name")).hide(500)}).on("propertychange change click keyup input paste",".login .input",function(){let o=$(this),e=o.attr("id"),t=o.val(),s=!1;"email"==e||"donator"==e?s=t.bMatch(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/):"username"==e?s=t.bMatch(/^\w+$/):"password"==e?s=t.bMatch(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/):"confirmpwd"==e&&(s=t==$("#password").val()),o.addClass("incorrect"),s&&o.removeClass("incorrect")}),$("#side-bar .bar-toggle").on("mouseenter touchstart",function(){$(this).css("left","-"+($(this).width()+50)+"px")}).on("mouseleave touchmove click",function(){$(this).css("left","-35px")}),void 0!==K.local("powered")&&(K.check.doOnce=!K.local("powered")),"string"==K.type(K.urlParam("d"))&&$.ajax({type:"POST",url:"php/process_donator.php",data:{load:K.urlParam("d")}}).done(function(){window.location.href=window.location.href.split("?")[0]}),$.getJSON("data/modes.json",function(o){const e=$(".bar-box.mode .box-content");e.append($("<span />",{class:"title",text:"Map Modes"})),K.each(o,function(){$("<div />",{class:"mode-wrap ripple-me"+(this.name==K.local("mode")?" active":""),mode:this.name}).append($("<img />",{class:"mode-icon",src:this.icon})).append($("<span />",{class:"mode-name",text:this.name})).append($("<div />",{class:"mode-desc span-row",html:this.descriptor})).appendTo(e).on("click",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),K.mode=$(this).attr("mode"),K.local("mode",K.mode),K.group.mode=K.group.feature[K.mode],!K.bar.b.power||K.bar.b.power.enabled()||(K.check.doOnce=!0),setTimeout(()=>{pageLoad()},1e3))})}),e.append($("<div />",{include:"docs/credits.html"}))}),$("body").on("click",".ripple-me",function(o){const e=$(".ripple"),t=o.pageX,s=o.pageY;let n,a;const i=function(o){a||(a=o);const r=o-a;if(r<600){const o=r/600*(2-r/600),a=`circle at ${t}px ${s}px`,c=`rgba(175, 101, 44, ${.3*(1-o)})`,l=10*o+"%";e.css({"background-image":"radial-gradient("+a+", "+c+" "+l+", transparent "+l+")"}),n=window.requestAnimationFrame(i)}else e.css({"background-image":"none"}),window.cancelAnimationFrame(n)};n=window.requestAnimationFrame(i)}),pageLoad()});
//# sourceMappingURL=index.min.js.map
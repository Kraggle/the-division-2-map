!function(window,document,undefined){var K={version:"1.0"},indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1};function expose(){var oldL=window.K;K.noConflict=function(){return window.K=oldL,this},window.K=K}"object"==typeof module&&"object"==typeof module.exports?module.exports=K:"function"==typeof define&&define.amd&&define(K),void 0!==window&&expose(),K.Util={extend:function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||K.Util.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(K.Util.isPlainObject(copy)||(copyIsArray=K.Util.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&K.Util.isArray(src)?src:[]):clone=src&&K.Util.isPlainObject(src)?src:{},target[name]=K.Util.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},each:function(obj,callback){var length,i=0;if(isArrayLike(obj))for(length=obj.length;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},isFunction:function(obj){return"function"===K.Util.type(obj)},isPlainObject:function(obj){var proto,Ctor;return!(!obj||"[object Object]"!==toString.call(obj))&&(!(proto=Object.getPrototypeOf(obj))||"function"==typeof(Ctor=hasOwn.call(proto,"constructor")&&proto.constructor)&&fnToString.call(Ctor)===ObjectFunctionString)},create:Object.create||function(){function F(){}return function(proto){return F.prototype=proto,new F}}(),bind:function(fn,obj){var slice=Array.prototype.slice;if(fn.bind)return fn.bind.apply(fn,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.length?args.concat(slice.call(arguments)):arguments)}},stamp:function(obj){return obj._k_id=obj._k_id||++K.Util.lastId,obj._k_id},lastId:0,throttle:function(fn,time,context){var lock,args,wrapperFn,later;return later=function(){lock=!1,args&&(wrapperFn.apply(context,args),args=!1)},wrapperFn=function(){lock?args=arguments:(fn.apply(context,arguments),setTimeout(later,time),lock=!0)}},wrapNum:function(x,range,includeMax){var max=range[1],min=range[0],d=max-min;return x===max&&includeMax?x:((x-min)%d+d)%d+min},falseFn:function(){return!1},formatNum:function(num,digits){var pow=Math.pow(10,digits||5);return Math.round(num*pow)/pow},trim:function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},splitWords:function(str){return K.Util.trim(str).split(/\s+/)},setOptions:function(obj,options){for(var i in obj.hasOwnProperty("options")||(obj.options=obj.options?K.Util.create(obj.options):{}),options)obj.options[i]=options[i];return obj.options},getParamString:function(obj,existingUrl,uppercase){var params=[];for(var i in obj)params.push(encodeURIComponent(uppercase?i.toUpperCase():i)+"="+encodeURIComponent(obj[i]));return(existingUrl&&-1!==existingUrl.indexOf("?")?"&":"?")+params.join("&")},template:function(str,data){return str.replace(K.Util.templateRe,function(str,key){var value=data[key];if(void 0===value)throw new Error("No value provided for variable "+str);return"function"==typeof value&&(value=value(data)),value})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},indexOf:function(array,el){for(var i=0;i<array.length;i++)if(array[i]===el)return i;return-1},urlParam:function(name){var a={},r=window.location.href.match(/\?([^#]*)/);return null==r?null:(r=r[1].split("&"),K.Util.each(r,function(k,v){v=v.split("="),a[v[0]]=v[1]}),a[name]||a)},curtail:function(){var a=arguments[0],e=arguments[1];return!Object.keys(a).length&&Object.keys(e).length&&(a=K.Util.extend({},arguments[1]),e=arguments[2]),e&&"object"!=typeof e&&(e=[e]),K.Util.each(e,function(i,v){v in a&&delete a[v]}),a},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},isInArray:function(){return-1!=$.inArray(arguments[0],arguments[1])}},K.extend=K.Util.extend,K.isInArray=K.Util.isInArray,K.curtail=K.Util.curtail,K.urlParam=K.Util.urlParam,K.bind=K.Util.bind,K.stamp=K.Util.stamp,K.setOptions=K.Util.setOptions,K.Class=function(){},K.Class.extend=function(props){var NewClass=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},parentProto=NewClass.__super__=this.prototype,proto=K.Util.create(parentProto);for(var i in proto.constructor=NewClass,NewClass.prototype=proto,this)this.hasOwnProperty(i)&&"prototype"!==i&&(NewClass[i]=this[i]);return props.statics&&(K.extend(NewClass,props.statics),delete props.statics),props.includes&&(K.Util.extend.apply(null,[proto].concat(props.includes)),delete props.includes),proto.options&&(props.options=K.Util.extend(K.Util.create(proto.options),props.options)),K.extend(proto,props),proto._initHooks=[],proto.callInitHooks=function(){if(!this._initHooksCalled){parentProto.callInitHooks&&parentProto.callInitHooks.call(this),this._initHooksCalled=!0;for(var i=0,len=proto._initHooks.length;i<len;i++)proto._initHooks[i].call(this)}},NewClass},K.Class.include=function(props){return K.extend(this.prototype,props),this},K.Class.mergeOptions=function(options){return K.extend(this.prototype.options,options),this},K.Class.addInitHook=function(fn){var args=Array.prototype.slice.call(arguments,1),init="function"==typeof fn?fn:function(){this[fn].apply(this,args)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(init),this},K.Evented=K.Class.extend({on:function(types,fn,context){if("object"==typeof types)for(var type in types)this._on(type,types[type],fn);else for(var i=0,len=(types=K.Util.splitWords(types)).length;i<len;i++)this._on(types[i],fn,context);return this},off:function(types,fn,context){if(types)if("object"==typeof types)for(var type in types)this._off(type,types[type],fn);else for(var i=0,len=(types=K.Util.splitWords(types)).length;i<len;i++)this._off(types[i],fn,context);else delete this._events;return this},_on:function(type,fn,context){this._events=this._events||{};var typeListeners=this._events[type];typeListeners||(this._events[type]=typeListeners=[]),context===this&&(context=void 0);for(var newListener={fn:fn,ctx:context},listeners=typeListeners,i=0,len=listeners.length;i<len;i++)if(listeners[i].fn===fn&&listeners[i].ctx===context)return;listeners.push(newListener)},_off:function(type,fn,context){var listeners,i,len;if(this._events&&(listeners=this._events[type]))if(fn){if(context===this&&(context=void 0),listeners)for(i=0,len=listeners.length;i<len;i++){var l=listeners[i];if(l.ctx===context&&l.fn===fn)return l.fn=K.Util.falseFn,this._firingCount&&(this._events[type]=listeners=listeners.slice()),void listeners.splice(i,1)}}else{for(i=0,len=listeners.length;i<len;i++)listeners[i].fn=K.Util.falseFn;delete this._events[type]}},fire:function(type,data,propagate){if(!this.listens(type,propagate))return this;var event=K.Util.extend({},data,{type:type,target:this});if(this._events){var listeners=this._events[type];if(listeners){this._firingCount=this._firingCount+1||1;for(var i=0,len=listeners.length;i<len;i++){var l=listeners[i];l.fn.call(l.ctx||this,event)}this._firingCount--}}return propagate&&this._propagateEvent(event),this},listens:function(type,propagate){var listeners=this._events&&this._events[type];if(listeners&&listeners.length)return!0;if(propagate)for(var id in this._eventParents)if(this._eventParents[id].listens(type,propagate))return!0;return!1},once:function(types,fn,context){if("object"==typeof types){for(var type in types)this.once(type,types[type],fn);return this}var handler=K.bind(function(){this.off(types,fn,context).off(types,handler,context)},this);return this.on(types,fn,context).on(types,handler,context)},addEventParent:function(obj){return this._eventParents=this._eventParents||{},this._eventParents[K.stamp(obj)]=obj,this},removeEventParent:function(obj){return this._eventParents&&delete this._eventParents[K.stamp(obj)],this},_propagateEvent:function(e){for(var id in this._eventParents)this._eventParents[id].fire(e.type,K.extend({layer:e.target},e),!0)}});var proto=K.Evented.prototype;proto.addEventListener=proto.on,proto.removeEventListener=proto.clearAllEventListeners=proto.off,proto.addOneTimeEventListener=proto.once,proto.fireEvent=proto.fire,proto.hasEventListeners=proto.listens,K.Mixin={Events:proto},K.Handler=K.Class.extend({initialize:function(map){this._map=map},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}})}(window,document);var class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty;function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),Array.prototype.removeDupes||(Array.prototype.removeDupes=function(){var r=[],a=[];return $.each(this,function(i,v){var vs=JSON.stringify(v);K.isInArray(vs,r)||(r.push(vs),a.push(v))}),a}),String.prototype.filter||(String.prototype.filter=function(){var s=this.toString().split(" "),r=[];return s.clean(""),s.length<2?s[0]:($.each(s,function(i,v){K.isInArray(v,r)||r.push(v)}),r.join(" "))}),Array.prototype.clean||(Array.prototype.clean=function(deleteValue){for(var i=0;i<this.length;i++)this[i]==deleteValue&&(this.splice(i,1),i--);return this}),String.prototype.bMatch||(String.prototype.bMatch=function(regExp){var s;return null!==this.toString().match(regExp)}),String.prototype.contains||(String.prototype.contains=function(str){var s;return-1!=this.toString().toLowerCase().indexOf(str.toLowerCase())}),String.prototype.space||(String.prototype.space=function(){var s;return this.toString().replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").trim()}),String.prototype.titleCase||(String.prototype.titleCase=function(){var s;return this.toString().replace(/(?:^|\s)\w/g,function(match){return match.toUpperCase()})}),String.prototype.firstToUpper||(String.prototype.firstToUpper=function(){var s=this.toString();return s.substr(0,1).toUpperCase()+s.substr(1)});
//# sourceMappingURL=K.min.js.map
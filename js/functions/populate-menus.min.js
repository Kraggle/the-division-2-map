import{jQuery as $}from"../jQuery/jquery3.4.1.js";import{K}from"../K.js";import{polyHoverAnimation,sortObjByKeys,switchLayerGroups,toggleHideIcons,showHideLayers,showHideCategory,showHideAllLayers}from"./misc.js";export const populateMenus=function(){K.myMap.panBy([0,0]),K.user.type&&switchLayerGroups(),K.completeHidden=K.local("completeHidden")||!1;let e="#side-bar .filters .side-content";$(e).html(""),$(e).append(`<a class="hide-all ripple-me" title="Show/Hide all!"></a>\n                <span class="title">Filters</span>\n                <a class="hide-complete ripple-me${K.completeHidden?' hidden">Show':'">Hide'} Complete</a>`);const s=sortObjByKeys(K.map.type[K.mode]);if(K.filters=K.local("filters")||{},K.each(s,function(s,t){if(!K.length(t))return;t=sortObjByKeys(t);const i=$("<div />",{class:"category-wrap"}).appendTo($(e));i.append(`<div class="sub title buttons">\n                        <a class="collapse ripple-me">\n                            <span class="text">${s.firstToUpper()}</span>\n                            <span class="control icon" title="Collapse/Expand ${s}"></span>\n                        </a>\n                        <a class="control hide-some ripple-me" category="${s}" title="Show/Hide all ${s}"></a>\n                    </div>`),K.each(t,function(e,t){const o=K.filters[e]||!1,l=$("<a />",{class:"side-bar-button ripple-me"+(o?" inactive":""),set:s,label:e}).appendTo(i),a=$("<div />",{class:"spacer"}).appendTo(l);if(t[0].contains(".svg")){let s=t[Math.floor(Math.random()*t.length)];"MainMission"==e&&(s="images/marker-mission.svg"),"SideMission"==e&&(s="images/marker-mission-side.svg"),$("<img />",{class:"visual",src:s}).appendTo(a)}else"polyline"==s?$("<div />",{class:"polyline visual"}).css({backgroundColor:t[0]}).appendTo(a):$("<div />",{class:"polygon visual"}).css({borderColor:t[1],backgroundColor:t[0]}).appendTo(a);$("<span />",{class:"name",text:e.space().replace(/Dz/,"DZ").replace(/ (Survival|Complete)/,"").replace(" Of "," of ")}).appendTo(a),$("<span />",{class:"quantity",text:"[ x"+K.map.type.counts[e]+" ]"}).appendTo(a),o&&showHideLayers(s,e,!0)})}),$("#side-bar .side-bar-button").off("click").on("click",function(){$(this).toggleClass("inactive"),toggleHideIcons();let e=$(this).attr("label"),s=$(this).hasClass("inactive");K.filters=K.local("filters")||{},K.filters[e]=s,K.local("filters",K.filters),showHideLayers($(this).attr("set"),e,s)}),$("#side-bar .hide-all").off("click").on("click",function(){showHideAllLayers(!$(this).hasClass("hidden")),toggleHideIcons()}),$("#side-bar .hide-some").off("click").on("click",function(){showHideCategory($(this).attr("category"),!$(this).hasClass("hidden")),toggleHideIcons()}),$("#side-bar .hide-complete").off("click").on("click",function(){K.completeHidden?($(this).removeClass("hidden").text("Hide Complete"),K.completeHidden=!1):($(this).addClass("hidden").text("Show Complete"),K.completeHidden=!0),K.local("completeHidden",K.completeHidden),K.complete.showHide()}),K.complete.showHide(),toggleHideIcons(),$("#side-bar .collapse").off("click").on("click",function(){let e=$(".icon",this),s=$(this).parent().nextUntil(".sub.title");e.hasClass("hidden")?(s.each(function(){$(this).show(400)}),e.removeClass("hidden")):(s.each(function(){$(this).hide(400)}),e.addClass("hidden"))}),$(e).append(K.credits),K.local("sideBar")&&!K.local("cleanMenu")){let e=K.local("sideMenu");$("#side-bar").addClass("active "+e),$(".menu-toggle-wrap, #side-bar ."+e).addClass("active")}polyHoverAnimation(),$('.search [title!=""]').qtip({position:{viewport:$("#map-id"),my:"top right",at:"bottom center"},style:{classes:"tooltip-style"},show:{delay:250,solo:!0},hide:{event:"click mouseleave"}}),$("body").on("mouseover",'[title!=""]',function(){$(this).attr("title")&&($(this).removeAttr("oldtitle"),$(this).qtip("destroy",!0),$(this).qtip({position:{viewport:$("#map-id"),my:"left center",at:"right center"},style:{classes:"tooltip-style"},show:{delay:250,solo:!0},hide:{event:"click mouseleave"}}),$(this).qtip("toggle",!0))}),setTimeout(function(){$("#survival-logo, .loader-back").fadeOut(1e3)},1e3),$(".paypalBtn").off("click").on("click",function(){$("#side-bar .filters .paypalBtn").closest("form").submit()})};
//# sourceMappingURL=populate-menus.min.js.map
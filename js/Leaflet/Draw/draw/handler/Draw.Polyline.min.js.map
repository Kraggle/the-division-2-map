{"version":3,"sources":["Draw.Polyline.js"],"names":["L","Draw","Polyline","Feature","extend","statics","TYPE","Poly","options","allowIntersection","repeatMode","drawError","color","timeout","icon","DivIcon","iconSize","Point","className","touchIcon","guidelineDistance","maxGuideLineLength","shapeOptions","stroke","weight","opacity","fill","clickable","metric","feet","nautic","showLength","zIndexOffset","initialize","map","Browser","touch","this","message","drawLocal","draw","handlers","polyline","error","Util","type","prototype","call","addHooks","_map","_markers","_markerGroup","LayerGroup","addLayer","_poly","_tooltip","updateContent","_getTooltipText","_mouseMarker","marker","getCenter","divIcon","iconAnchor","on","_onMouseOut","_onMouseMove","_onMouseDown","_onMouseUp","addTo","_onZoomEnd","_onTouch","removeHooks","_clearHideErrorTimeout","_cleanUpShape","removeLayer","off","_clearGuides","deleteLastVertex","length","lastMarker","pop","poly","latlngs","getLatLngs","latlng","splice","setLatLngs","_vertexChanged","addVertex","markersLength","newLatLngIntersects","_showErrorTooltip","_errorShown","_hideErrorTooltip","push","_createMarker","addLatLng","completeShape","_fireCreatedEvent","disable","enable","_finishShape","_defaultShape","intersects","_shapeIsValid","_updateGuide","e","newPos","mouseEventToLayerPoint","originalEvent","layerPointToLatLng","_currentLatLng","_updateTooltip","setLatLng","DomEvent","preventDefault","added","fire","Event","DRAWVERTEX","layers","_updateFinishHandler","_updateRunningMeasure","_clickHandled","_touchHandled","_disableMarkers","_disableNewMarkers","clientX","clientY","_startPoint","_mouseDownOrigin","point","_endPoint","dragCheckDistance","distanceTo","lastPtDistance","_calculateFinishDistance","Math","abs","window","devicePixelRatio","_enableNewMarkers","touches","potentialLatLng","finishMarker","Polygon","Infinity","lastMarkerPoint","latLngToContainerPoint","getLatLng","potentialMarker","Marker","potentialMarkerPint","markerCount","latLngToLayerPoint","_drawGuide","latLng","text","updatePosition","pointA","pointB","floor","sqrt","pow","x","y","i","fraction","dashPoint","dash","_guidesContainer","DomUtil","create","_overlayPane","style","backgroundColor","setPosition","_updateGuideColor","l","childNodes","firstChild","removeChild","labelText","distanceStr","tooltip","start","_getMeasurementString","cont","subtext","end","previousMarkerIndex","distance","_measurementRunningTotal","currentLatLng","previousLatLng","GeometryUtil","readableDistance","showAsError","setStyle","_hideErrorTimeout","setTimeout","bind","removeError","clearTimeout"],"mappings":"AAKAA,EAAEC,KAAKC,SAAWF,EAAEC,KAAKE,QAAQC,OAAO,CACpCC,QAAS,CACLC,KAAM,YAGVC,KAAMP,EAAEE,SAERM,QAAS,CACLC,mBAAmB,EACnBC,YAAY,EACZC,UAAW,CACPC,MAAO,UACPC,QAAS,MAEbC,KAAM,IAAId,EAAEe,QAAQ,CAChBC,SAAU,IAAIhB,EAAEiB,MAAM,EAAG,GACzBC,UAAW,0CAEfC,UAAW,IAAInB,EAAEe,QAAQ,CACrBC,SAAU,IAAIhB,EAAEiB,MAAM,GAAI,IAC1BC,UAAW,6DAEfE,kBAAmB,GACnBC,mBAAoB,IACpBC,aAAc,CACVC,QAAQ,EACRX,MAAO,UACPY,OAAQ,EACRC,QAAS,GACTC,MAAM,EACNC,WAAW,GAEfC,QAAQ,EACRC,MAAM,EACNC,QAAQ,EACRC,YAAY,EACZC,aAAc,KAIlBC,WAAY,SAASC,IAAK1B,SAElBR,EAAEmC,QAAQC,QACVC,KAAK7B,QAAQM,KAAOuB,KAAK7B,QAAQW,WAIrCkB,KAAK7B,QAAQG,UAAU2B,QAAUtC,EAAEuC,UAAUC,KAAKC,SAASC,SAASC,MAGhEnC,SAAWA,QAAQG,YACnBH,QAAQG,UAAYX,EAAE4C,KAAKxC,OAAO,GAAIiC,KAAK7B,QAAQG,UAAWH,QAAQG,YAI1E0B,KAAKQ,KAAO7C,EAAEC,KAAKC,SAASI,KAE5BN,EAAEC,KAAKE,QAAQ2C,UAAUb,WAAWc,KAAKV,KAAMH,IAAK1B,UAKxDwC,SAAU,WACNhD,EAAEC,KAAKE,QAAQ2C,UAAUE,SAASD,KAAKV,MACnCA,KAAKY,OACLZ,KAAKa,SAAW,GAEhBb,KAAKc,aAAe,IAAInD,EAAEoD,WAC1Bf,KAAKY,KAAKI,SAAShB,KAAKc,cAExBd,KAAKiB,MAAQ,IAAItD,EAAEE,SAAS,GAAImC,KAAK7B,QAAQc,cAE7Ce,KAAKkB,SAASC,cAAcnB,KAAKoB,mBAO5BpB,KAAKqB,eACNrB,KAAKqB,aAAe1D,EAAE2D,OAAOtB,KAAKY,KAAKW,YAAa,CAChD9C,KAAMd,EAAE6D,QAAQ,CACZ3C,UAAW,uBACX4C,WAAY,CAAC,GAAI,IACjB9C,SAAU,CAAC,GAAI,MAEnBS,QAAS,EACTO,aAAcK,KAAK7B,QAAQwB,gBAInCK,KAAKqB,aACAK,GAAG,WAAY1B,KAAK2B,YAAa3B,MACjC0B,GAAG,YAAa1B,KAAK4B,aAAc5B,MACnC0B,GAAG,YAAa1B,KAAK6B,aAAc7B,MACnC0B,GAAG,UAAW1B,KAAK8B,WAAY9B,MAC/B+B,MAAM/B,KAAKY,MAEhBZ,KAAKY,KACAc,GAAG,UAAW1B,KAAK8B,WAAY9B,MAC/B0B,GAAG,YAAa1B,KAAK4B,aAAc5B,MACnC0B,GAAG,mBAAoB1B,KAAKgC,WAAYhC,MACxC0B,GAAG,aAAc1B,KAAKiC,SAAUjC,MAChC0B,GAAG,UAAW1B,KAAKgC,WAAYhC,QAO5CkC,YAAa,WACTvE,EAAEC,KAAKE,QAAQ2C,UAAUyB,YAAYxB,KAAKV,MAE1CA,KAAKmC,yBAELnC,KAAKoC,gBAGLpC,KAAKY,KAAKyB,YAAYrC,KAAKc,qBACpBd,KAAKc,oBACLd,KAAKa,SAEZb,KAAKY,KAAKyB,YAAYrC,KAAKiB,cACpBjB,KAAKiB,MAEZjB,KAAKqB,aACAiB,IAAI,YAAatC,KAAK6B,aAAc7B,MACpCsC,IAAI,WAAYtC,KAAK2B,YAAa3B,MAClCsC,IAAI,UAAWtC,KAAK8B,WAAY9B,MAChCsC,IAAI,YAAatC,KAAK4B,aAAc5B,MACzCA,KAAKY,KAAKyB,YAAYrC,KAAKqB,qBACpBrB,KAAKqB,aAGZrB,KAAKuC,eAELvC,KAAKY,KACA0B,IAAI,UAAWtC,KAAK8B,WAAY9B,MAChCsC,IAAI,YAAatC,KAAK4B,aAAc5B,MACpCsC,IAAI,mBAAoBtC,KAAKgC,WAAYhC,MACzCsC,IAAI,UAAWtC,KAAKgC,WAAYhC,MAChCsC,IAAI,aAActC,KAAKiC,SAAUjC,MACjCsC,IAAI,QAAStC,KAAKiC,SAAUjC,OAKrCwC,iBAAkB,WACd,KAAIxC,KAAKa,SAAS4B,QAAU,GAA5B,CAIA,IAAIC,WAAa1C,KAAKa,SAAS8B,MAC3BC,KAAO5C,KAAKiB,MAEZ4B,QAAUD,KAAKE,aACfC,OAASF,QAAQG,QAAQ,EAAG,GAAG,GACnChD,KAAKiB,MAAMgC,WAAWJ,SAEtB7C,KAAKc,aAAauB,YAAYK,YAE1BE,KAAKE,aAAaL,OAAS,GAC3BzC,KAAKY,KAAKyB,YAAYO,MAG1B5C,KAAKkD,eAAeH,QAAQ,KAKhCI,UAAW,SAASJ,QAChB,IAAIK,cAAgBpD,KAAKa,SAAS4B,QAEb,IAAMzC,KAAK7B,QAAQC,mBAAqB4B,KAAKiB,MAAMoC,oBAAoBN,QACxF/C,KAAKsD,qBAEEtD,KAAKuD,aACZvD,KAAKwD,oBAGTxD,KAAKa,SAAS4C,KAAKzD,KAAK0D,cAAcX,SAEtC/C,KAAKiB,MAAM0C,UAAUZ,QAEkB,IAAnC/C,KAAKiB,MAAM6B,aAAaL,QACxBzC,KAAKY,KAAKI,SAAShB,KAAKiB,OAG5BjB,KAAKkD,eAAeH,QAAQ,KAKhCa,cAAe,WACP5D,KAAKa,SAAS4B,QAAU,IAI5BzC,KAAK6D,oBACL7D,KAAK8D,UAED9D,KAAK7B,QAAQE,YACb2B,KAAK+D,WAIbC,aAAc,WACV,IAAInB,QAAU7C,KAAKiB,MAAMgD,cAAgBjE,KAAKiB,MAAMgD,gBAAkBjE,KAAKiB,MAAM6B,aAC7EoB,WAAalE,KAAKiB,MAAMoC,oBAAoBR,QAAQA,QAAQJ,OAAS,KAEnEzC,KAAK7B,QAAQC,mBAAqB8F,aAAgBlE,KAAKmE,gBACzDnE,KAAKsD,qBAITtD,KAAK6D,oBACL7D,KAAK8D,UACD9D,KAAK7B,QAAQE,YACb2B,KAAK+D,WAMbI,cAAe,WACX,OAAO,GAGXnC,WAAY,WACc,OAAlBhC,KAAKa,UACLb,KAAKoE,gBAIbxC,aAAc,SAASyC,GACnB,IAAIC,OAAStE,KAAKY,KAAK2D,uBAAuBF,EAAEG,eAC5CzB,OAAS/C,KAAKY,KAAK6D,mBAAmBH,QAI1CtE,KAAK0E,eAAiB3B,OAEtB/C,KAAK2E,eAAe5B,QAGpB/C,KAAKoE,aAAaE,QAGlBtE,KAAKqB,aAAauD,UAAU7B,QAE5BpF,EAAEkH,SAASC,eAAeT,EAAEG,gBAGhCtB,eAAgB,SAASH,OAAQgC,OAC7B/E,KAAKY,KAAKoE,KAAKrH,EAAEC,KAAKqH,MAAMC,WAAY,CAAEC,OAAQnF,KAAKc,eACvDd,KAAKoF,uBAELpF,KAAKqF,sBAAsBtC,OAAQgC,OAEnC/E,KAAKuC,eAELvC,KAAK2E,kBAGT9C,aAAc,SAASwC,GACnB,IAAKrE,KAAKsF,gBAAkBtF,KAAKuF,gBAAkBvF,KAAKwF,gBAAiB,CACrExF,KAAK4B,aAAayC,GAClBrE,KAAKsF,eAAgB,EACrBtF,KAAKyF,qBACL,IAAIjB,cAAgBH,EAAEG,cAClBkB,QAAUlB,cAAckB,QACxBC,QAAUnB,cAAcmB,QAC5B3F,KAAK4F,YAAYlF,KAAKV,KAAM0F,QAASC,WAI7CC,YAAa,SAASF,QAASC,SAC3B3F,KAAK6F,iBAAmBlI,EAAEmI,MAAMJ,QAASC,UAG7C7D,WAAY,SAASuC,GACjB,IAAIG,cAAgBH,EAAEG,cAClBkB,QAAUlB,cAAckB,QACxBC,QAAUnB,cAAcmB,QAC5B3F,KAAK+F,UAAUrF,KAAKV,KAAM0F,QAASC,QAAStB,GAC5CrE,KAAKsF,cAAgB,MAGzBS,UAAW,SAASL,QAASC,QAAStB,GAClC,GAAIrE,KAAK6F,iBAAkB,CACvB,IAAIG,kBAAoBrI,EAAEmI,MAAMJ,QAASC,SACpCM,WAAWjG,KAAK6F,kBACjBK,eAAiBlG,KAAKmG,yBAAyB9B,EAAEtB,QAChC,IAAMpF,EAAEmC,QAAQC,MACjCC,KAAKgE,eACEoC,KAAKC,IAAIL,mBAAqB,GAAKM,OAAOC,kBAAoB,IACrEvG,KAAKmD,UAAUkB,EAAEtB,QAErB/C,KAAKwG,oBAETxG,KAAK6F,iBAAmB,MAK5B5D,SAAU,SAASoC,GACf,IAAIG,cAAgBH,EAAEG,cAClBkB,QACAC,SACAnB,cAAciC,UAAWjC,cAAciC,QAAQ,IAAOzG,KAAKsF,eAAkBtF,KAAKuF,eAAkBvF,KAAKwF,kBACzGE,QAAUlB,cAAciC,QAAQ,GAAGf,QACnCC,QAAUnB,cAAciC,QAAQ,GAAGd,QACnC3F,KAAKyF,qBACLzF,KAAKuF,eAAgB,EACrBvF,KAAK4F,YAAYlF,KAAKV,KAAM0F,QAASC,SACrC3F,KAAK+F,UAAUrF,KAAKV,KAAM0F,QAASC,QAAStB,GAC5CrE,KAAKuF,cAAgB,MAEzBvF,KAAKsF,cAAgB,MAGzB3D,YAAa,WACL3B,KAAKkB,UACLlB,KAAKkB,SAASS,YAAYjB,KAAKV,KAAKkB,WAQ5CiF,yBAA0B,SAASO,iBAC/B,IAAIR,eACJ,GAAIlG,KAAKa,SAAS4B,OAAS,EAAG,CAC1B,IAAIkE,aACJ,GAAI3G,KAAKQ,OAAS7C,EAAEC,KAAKC,SAASI,KAC9B0I,aAAe3G,KAAKa,SAASb,KAAKa,SAAS4B,OAAS,OACjD,CAAA,GAAIzC,KAAKQ,OAAS7C,EAAEC,KAAKgJ,QAAQ3I,KAGpC,OAAO4I,EAAAA,EAFPF,aAAe3G,KAAKa,SAAS,GAIjC,IAAIiG,gBAAkB9G,KAAKY,KAAKmG,uBAAuBJ,aAAaK,aAChEC,gBAAkB,IAAItJ,EAAEuJ,OAAOR,gBAAiB,CAC5CjI,KAAMuB,KAAK7B,QAAQM,KACnBkB,aAA0C,EAA5BK,KAAK7B,QAAQwB,eAE/BwH,oBAAsBnH,KAAKY,KAAKmG,uBAAuBE,gBAAgBD,aAC3Ed,eAAiBY,gBAAgBb,WAAWkB,0BAE5CjB,eAAiBW,EAAAA,EAErB,OAAOX,gBAGXd,qBAAsB,WAClB,IAAIgC,YAAcpH,KAAKa,SAAS4B,OAE5B2E,YAAc,GACdpH,KAAKa,SAASuG,YAAc,GAAG1F,GAAG,QAAS1B,KAAKgE,aAAchE,MAI9DoH,YAAc,GACdpH,KAAKa,SAASuG,YAAc,GAAG9E,IAAI,QAAStC,KAAKgE,aAAchE,OAIvE0D,cAAe,SAASX,QACpB,IAAIzB,OAAS,IAAI3D,EAAEuJ,OAAOnE,OAAQ,CAC9BtE,KAAMuB,KAAK7B,QAAQM,KACnBkB,aAA0C,EAA5BK,KAAK7B,QAAQwB,eAK/B,OAFAK,KAAKc,aAAaE,SAASM,QAEpBA,QAGX8C,aAAc,SAASE,QACnB,IAAI8C,YAAcpH,KAAKa,SAAWb,KAAKa,SAAS4B,OAAS,EAErD2E,YAAc,IACd9C,OAASA,QAAUtE,KAAKY,KAAKyG,mBAAmBrH,KAAK0E,gBAGrD1E,KAAKuC,eACLvC,KAAKsH,WACDtH,KAAKY,KAAKyG,mBAAmBrH,KAAKa,SAASuG,YAAc,GAAGJ,aAC5D1C,UAKZK,eAAgB,SAAS4C,QACrB,IAAIC,KAAOxH,KAAKoB,kBAEZmG,QACAvH,KAAKkB,SAASuG,eAAeF,QAG5BvH,KAAKuD,aACNvD,KAAKkB,SAASC,cAAcqG,OAIpCF,WAAY,SAASI,OAAQC,QACzB,IAAIlF,OAAS2D,KAAKwB,MAAMxB,KAAKyB,KAAKzB,KAAK0B,IAAKH,OAAOI,EAAIL,OAAOK,EAAI,GAAK3B,KAAK0B,IAAKH,OAAOK,EAAIN,OAAOM,EAAI,KACnGjJ,kBAAoBiB,KAAK7B,QAAQY,kBACjCC,mBAAqBgB,KAAK7B,QAAQa,mBAElCiJ,EAAIxF,OAASzD,mBAAqByD,OAASzD,mBAAqBD,kBAChEmJ,SACAC,UACAC,KAQJ,IALKpI,KAAKqI,mBACNrI,KAAKqI,iBAAmB1K,EAAE2K,QAAQC,OAAO,MAAO,sBAAuBvI,KAAKwI,eAIzEP,EAAIxF,OAAQwF,GAAKjI,KAAK7B,QAAQY,kBAEjCmJ,SAAWD,EAAIxF,OAGf0F,UAAY,CACRJ,EAAG3B,KAAKwB,MAAOF,OAAOK,GAAK,EAAIG,UAAcA,SAAWP,OAAOI,GAC/DC,EAAG5B,KAAKwB,MAAOF,OAAOM,GAAK,EAAIE,UAAcA,SAAWP,OAAOK,KAInEI,KAAOzK,EAAE2K,QAAQC,OAAO,MAAO,0BAA2BvI,KAAKqI,mBAC1DI,MAAMC,gBAAmB1I,KAAKuD,YAAgDvD,KAAK7B,QAAQG,UAAUC,MAAzDyB,KAAK7B,QAAQc,aAAaV,MAE3EZ,EAAE2K,QAAQK,YAAYP,KAAMD,YAIpCS,kBAAmB,SAASrK,OACxB,GAAIyB,KAAKqI,iBACL,IAAK,IAAIJ,EAAI,EAAGY,EAAI7I,KAAKqI,iBAAiBS,WAAWrG,OAAQwF,EAAIY,EAAGZ,IAChEjI,KAAKqI,iBAAiBS,WAAWb,GAAGQ,MAAMC,gBAAkBnK,OAMxEgE,aAAc,WACV,GAAIvC,KAAKqI,iBACL,KAAOrI,KAAKqI,iBAAiBU,YACzB/I,KAAKqI,iBAAiBW,YAAYhJ,KAAKqI,iBAAiBU,aAKpE3H,gBAAiB,WACb,IAAI1B,WAAaM,KAAK7B,QAAQuB,WAC1BuJ,UAAWC,YAuBf,OAtBIvL,EAAEmC,QAAQC,QACVL,YAAa,GAEY,IAAzBM,KAAKa,SAAS4B,OACdwG,UAAY,CACRzB,KAAM7J,EAAEuC,UAAUC,KAAKC,SAASC,SAAS8I,QAAQC,QAGrDF,YAAcxJ,WAAaM,KAAKqJ,wBAA0B,GAGtDJ,UADyB,IAAzBjJ,KAAKa,SAAS4B,OACF,CACR+E,KAAM7J,EAAEuC,UAAUC,KAAKC,SAASC,SAAS8I,QAAQG,KACjDC,QAASL,aAGD,CACR1B,KAAM7J,EAAEuC,UAAUC,KAAKC,SAASC,SAAS8I,QAAQK,IACjDD,QAASL,cAIdD,WAGX5D,sBAAuB,SAAStC,OAAQgC,OACpC,IAAI3B,cAAgBpD,KAAKa,SAAS4B,OAC9BgH,oBAAqBC,SAEI,IAAzB1J,KAAKa,SAAS4B,OACdzC,KAAK2J,yBAA2B,GAEhCF,oBAAsBrG,eAAiB2B,MAAQ,EAAI,GACnD2E,SAAW3G,OAAOkD,WAAWjG,KAAKa,SAAS4I,qBAAqBzC,aAEhEhH,KAAK2J,0BAA4BD,UAAY3E,MAAQ,GAAK,KAIlEsE,sBAAuB,WACnB,IAAIO,cAAgB5J,KAAK0E,eACrBmF,eAAiB7J,KAAKa,SAASb,KAAKa,SAAS4B,OAAS,GAAGuE,YACzD0C,SAKJ,OAFAA,SAAW1J,KAAK2J,yBAA2BC,cAAc3D,WAAW4D,gBAE7DlM,EAAEmM,aAAaC,iBAAiBL,SAAU1J,KAAK7B,QAAQoB,OAAQS,KAAK7B,QAAQqB,KAAMQ,KAAK7B,QAAQsB,SAG1G6D,kBAAmB,WACftD,KAAKuD,aAAc,EAGnBvD,KAAKkB,SACA8I,cACA7I,cAAc,CAAEqG,KAAMxH,KAAK7B,QAAQG,UAAU2B,UAGlDD,KAAK4I,kBAAkB5I,KAAK7B,QAAQG,UAAUC,OAC9CyB,KAAKiB,MAAMgJ,SAAS,CAAE1L,MAAOyB,KAAK7B,QAAQG,UAAUC,QAGpDyB,KAAKmC,yBACLnC,KAAKkK,kBAAoBC,WAAWxM,EAAE4C,KAAK6J,KAAKpK,KAAKwD,kBAAmBxD,MAAOA,KAAK7B,QAAQG,UAAUE,UAG1GgF,kBAAmB,WACfxD,KAAKuD,aAAc,EAEnBvD,KAAKmC,yBAGLnC,KAAKkB,SACAmJ,cACAlJ,cAAcnB,KAAKoB,mBAGxBpB,KAAK4I,kBAAkB5I,KAAK7B,QAAQc,aAAaV,OACjDyB,KAAKiB,MAAMgJ,SAAS,CAAE1L,MAAOyB,KAAK7B,QAAQc,aAAaV,SAG3D4D,uBAAwB,WAChBnC,KAAKkK,oBACLI,aAAatK,KAAKkK,mBAClBlK,KAAKkK,kBAAoB,OAMjCzE,mBAAoB,WAChBzF,KAAKwF,iBAAkB,GAI3BgB,kBAAmB,WACf2D,WAAW,WACPnK,KAAKwF,iBAAkB,GACzB4E,KAAKpK,MAAO,KAGlBoC,cAAe,WACPpC,KAAKa,SAAS4B,OAAS,GACvBzC,KAAKa,SAASb,KAAKa,SAAS4B,OAAS,GAAGH,IAAI,QAAStC,KAAKgE,aAAchE,OAIhF6D,kBAAmB,WACf,IAAIjB,KAAO,IAAI5C,KAAK9B,KAAK8B,KAAKiB,MAAM6B,aAAc9C,KAAK7B,QAAQc,cAC/DtB,EAAEC,KAAKE,QAAQ2C,UAAUoD,kBAAkBnD,KAAKV,KAAM4C","file":"Draw.Polyline.js"}
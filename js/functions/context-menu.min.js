import{jQuery as $}from"../jQuery/jquery3.4.1.js";import{K}from"../K.js";import{switchLayerGroups}from"./misc.js";K.contextMenu={items:{complete:{value:e=>e.complete?"Un-Complete":"Complete",icon:"images/menu-complete-solo.svg",check:e=>"marker"==e.options.shape&&!!e.options.complete,action:e=>e.toggleCompleted()},share:{value:"Share",icon:"images/menu-share.svg",check:e=>!!e.options.type,action:e=>K.share(["layer"],e)},search:{value:"Search Similar",icon:"images/menu-search.svg",check:e=>!!e.options.type,action:e=>K.search.by("type",e.options.type)},settings:{value:"Settings",icon:"images/menu-settings.svg",check:e=>K.bar.b.power.enabled()&&(K.user.name==e.options.creator||K.user.type>3),action:e=>K.tool.layer._show(e)},move:{value:e=>e.dragging.enabled()?"End Move":"Move",icon:"images/menu-move-solo.svg",check:e=>K.bar.b.power.enabled()&&(K.user.name==e.options.creator||K.user.type>3),action:e=>{e.dragging.enabled()?e.dragging.disable():(e.dragging.enable(),e.on("dragend",function(){this.saved(!1)}))}},edit:{value:e=>e.editing.edit?"End Edit":"Edit",icon:"images/menu-edit-solo.svg",check:e=>K.bar.b.power.enabled()&&(K.user.name==e.options.creator||K.user.type>3),action:e=>{e.editing.edit=!e.editing.edit,switchLayerGroups()}}},build:function(e,t){const n=$("<div />",{class:"context-menu"}).css({top:e.containerPoint.y,left:e.containerPoint.x});K.each(this.items,function(){if(!this.check(t))return;n.children().length&&"Settings"==this.value&&$("<hr>").appendTo(n);const e=$("<div />",{class:"menu-item"});$("<img />",{src:this.icon||"",class:"menu-icon"}).appendTo(e),$("<span />",{class:"menu-text",text:"function"==K.type(this.value)?this.value(t):this.value}).appendTo(e),e.appendTo(n).on("click",()=>{$(".context-menu").remove(),this.action(t)})}),n.children().length&&n.appendTo($("body"))}};
//# sourceMappingURL=context-menu.js.map
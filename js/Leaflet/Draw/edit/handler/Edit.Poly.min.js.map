{"version":3,"sources":["Edit.Poly.js"],"names":["L","Edit","Poly","Handler","extend","options","initialize","poly","this","latlngs","_latlngs","_holes","concat","_poly","setOptions","on","_updateLatLngs","_defaultShape","Polyline","_flat","_eachVertexHandler","callback","i","_verticesHandlers","length","addHooks","_initHandlers","handler","removeHooks","updateMarkers","push","PolyVerticesEdit","e","layer","icon","DivIcon","iconSize","Point","className","touchIcon","drawError","color","timeout","Browser","touch","Util","Polygon","fill","editing","setStyle","_map","_markerGroup","_initMarkers","addLayer","original","removeLayer","_markers","clearLayers","LayerGroup","j","len","marker","markerLeft","markerRight","_createMarker","_onMarkerClick","_createMiddleMarker","_updatePrevNext","latlng","index","Marker","Touch","draggable","_origLatLng","_index","_onMarkerDragStart","_onMarkerDrag","_fireEdit","_onTouchMove","fire","_spliceLatLngs","removed","splice","apply","arguments","_convertLatLngs","redraw","_removeMarker","_updateIndexes","off","edited","Draw","Event","EDITVERTEX","layers","target","_latlng","_middleLeft","setLatLng","_getMiddleLatLng","_prev","_middleRight","_next","tooltip","_editTooltip","allowIntersection","intersects","originalColor","version","indexOf","dragging","_draggable","_onUp","updateContent","text","drawLocal","draw","handlers","polyline","error","setTimeout","edit","subtext","minPoints","layerPoint","mouseEventToLayerPoint","originalEvent","touches","layerPointToLatLng","delta","eachLayer","marker1","marker2","onClick","onDragStart","onDragEnd","setOpacity","lat","getLatLng","lng","call","map","p1","project","p2","unproject","_add","_divideBy","addInitHook","editable","enable","enabled"],"mappings":"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","file":"Edit.Poly.js"}
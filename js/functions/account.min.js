import{jQuery as $}from"../jQuery/jquery3.4.1.js";import{K}from"../K.js";import{formhash,regformhash,resetformhash}from"../Utility/forms.js";import pageLoad from"./page-load.js";export function doDonator(){$.ajax({type:"POST",url:"php/process_donator.php",data:{email:$("#donator").val()}}).done(function(e){(e=$.parseJSON(e)).success?($("#side-bar .login .success").html(e.success),$("#side-bar .login .error").html(""),$("#donator").val("")):($("#side-bar .login .error").html(e.error),$("#side-bar .login .success").html(""))})}export function doLogin(){const e=document.getElementById("login");formhash(e,e.password),$.ajax({type:"POST",url:"php/process_login.php",data:{email:e.username.value,p:e.p.value}}).done(function(e){K.local("username")&&(K.user.name=K.local("username"),K.user.type=K.local("usertype"),K.user.getData()),K.local("donate")?$("#alert").hide():$("#alert").show(),e&&($("#side-bar .login .box-content").parent().html(e),K.check.doOnce=!0,pageLoad())})}export function doRegister(){const e=document.getElementById("regform");regformhash(e,e.username,e.email,e.password,e.confirmpwd)?$.ajax({type:"POST",url:"php/process_register.php",data:{username:e.username.value,email:e.email.value,p:e.p.value}}).done(function(e){e=e.bMatch(/^(\{|\[])".*(\}|\])$/)?$.parseJSON(e):e,"object"==K.type(e)&&e.error?$("#side-bar .login .error").html(e.error):$("#side-bar .login .box-content").parent().html(e)}):$("#side-bar .login .error").html(K.user.error)}export function doReset(){const e=document.getElementById("reset");resetformhash(e,e.password,e.confirmpwd)?$.ajax({type:"POST",url:"php/process_reset.php",data:{token:K.urlParam("token"),p:e.p.value}}).done(function(e){e=e.bMatch(/^(\{|\[])".*(\}|\])$/)?$.parseJSON(e):e,"object"==K.type(e)&&e.error?$("#side-bar .login .error").html(e.error):window.location.href=window.location.href.split("?")[0]}):$("#side-bar .login .error").html(K.user.error)}export function doForgot(){const e=document.getElementById("forgot");$.ajax({type:"POST",url:"php/process_forgot.php",data:{email:e.email.value}}).done(function(e){let r=e.bMatch(/^(\{|\[])".*(\}|\])$/)?$.parseJSON(e):e;$.ajax({url:"php/login.php"}).done(function(e){e&&$("#side-bar .login .box-content").parent().html(e),"object"==K.type(r)&&(r.error&&$("#side-bar .login .error").html(r.error),r.success&&$("#side-bar .login .success").html(r.success))})})}export function loadReset(e){if(!e||10!=e.length)return;const r=$(".bar-box.login").removeAttr("include");$.ajax({type:"POST",url:"./php/reset.php",data:{token:e}}).done(function(e){r.html(e)})}
//# sourceMappingURL=account.min.js.map
import{jQuery as $}from"./js/jQuery/jquery3.4.1.js";window.$=$;import"./js/jQuery/jQuery-UI/importer.js";import"./js/jquery-kraggle.js";import{K}from"./js/K.js";window.K=K;import{L}from"./js/Leaflet/importer.js";window.L=L;import"./js/extensions/K.Extended.js";import"./js/extensions/L.Draw.Extended.js";import"./js/extensions/L.Extended.js";import"./js/tools/marker.js";import"./js/tools/layer.js";import{doDonator,doLogin,doRegister,doReset,doForgot,loadReset}from"./js/functions/account.js";import"./js/functions/complete.js";import"./js/functions/context-menu.js";import"./js/functions/cycle.js";import"./js/functions/map.js";import{toggleFullScreen,onZoomEnd,polyHoverAnimation}from"./js/functions/misc.js";import"./js/functions/search.js";import"./js/functions/share.js";import"./js/functions/shortcut.js";import"./js/functions/uri-tasks.js";import"./js/functions/level.js";import pageLoad from"./js/functions/page-load.js";K.loadStyles(["./js/Leaflet/leaflet1.5.1.css","./js/jQuery/jquery-ui1.12.1.css","./js/Utility/huebee.css","./js/Leaflet/Draw/leaflet.draw.css","./js/Utility/jquery.qtip.css","./index.css"]),!K.local("mode")||!K.has(K.local("mode"),K.modes.get)&&K.local("mode","Story Mode"),!K.local("copyRefresh")&&(K.local("copyRefresh",!0),K.localRemove("copy")),$(function(){K.touchOnly=window.matchMedia("(any-hover: none)").matches,K.includeHTML(),K.initMap(),$.ajax({url:"docs/credits.html"}).done(function(e){K.credits=e}),K.tool.marker.fill(),$.ajax({url:"php/map_date.php"}).done(function(e){K.mapVersion=e;const o=L.imageOverlay(`images/map.svg?v=${K.mapVersion}`,[[15,-15],[-15,15]],{attribution:'<a title="Tom Clancy\'s The Division 2" href="https://tomclancy-thedivision.ubisoft.com/">The Division 2</a>',pane:"mapPane"}).addTo(K.myMap);$(".leaflet-map-pane > .leaflet-image-layer").addClass("svg-me"),K.imgToSvg("svg-me",function(){o._image=this,this.id="svg-map";const e=L.imageOverlay(`images/map.svg?v=${K.mapVersion}`,[[15,-15],[-15,15]],{pane:"controlPane"}).addTo(K.myMap);$(".leaflet-control-pane > .leaflet-image-layer").addClass("svg-me"),K.imgToSvg("svg-me",function(){e._image=this,this.id="control-map",$(this).addClass("level-control-layer"),$(">*",this).remove(),K.level.build()})})}),K.myMap.addLayer(K.group.mode.groupAll),K.myMap.on("zoomend moveend",function(){onZoomEnd(),K.local("zoom",K.myMap.getZoom()),K.local("pan",K.myMap.getCenter()),polyHoverAnimation()}),$("#side-bar .bar-toggle:not(.full)").on("click",function(){const e=$("#side-bar"),o="active",t=".bar-toggle.active, .bar-box.active",a=$(this).attr("button"),s=K.local("sideMenu"),n=()=>{K.local("sideBar",e.hasClass(o)),K.local("sideMenu",a)};$(this).hasClass(o)?(e.removeClass(`${o} ${a}`),setTimeout(function(){$(t+", .bar-toggle-wrap",e).removeClass(o),n()},1e3)):e.hasClass(o)?(e.removeClass(`${o} ${s}`),setTimeout(function(){$(t,e).removeClass(o),e.addClass(`${o} ${a}`),$(`.${a}`,e).addClass(o),n()},1e3)):(e.addClass(`${o} ${a}`),$(`.${a}`,e).addClass(o),n())}),$(".bar-open").on("click",function(){$(".bar-toggle-wrap").toggleClass("active")}),$("#side-bar .bar-toggle").each(function(e){$(this).css("top",0==e?"10px":10+40*e+"px")});let e=$("#side-bar .bar-toggle.full");e.on("click",toggleFullScreen),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){e.toggleClass("yes")}),K.urlParam("overwolf")||K.local("currentUpdate")==K.currentUpdate||(K.local("sideMenu","changes"),K.local("sideBar",!0),K.local("currentUpdate",K.currentUpdate)),$("#side-bar .login").on("click",".page",function(){let e=$(this).attr("name");$.ajax({url:`php/${e}.php`}).done(function(e){e&&$("#side-bar .login .box-content").parent().html(e)})}),K.urlParam("forgot")&&loadReset(K.urlParam("token")),$("#side-bar").on("click","#regform .button",doRegister),$("#side-bar").on("keypress","#regform .input",function(e){13==e.which&&doRegister()}),$("#side-bar").on("click","#donate.button",doDonator),$("#side-bar").on("keypress","#donator",function(e){13==e.which&&doDonator()}),$("#side-bar").on("click","#login .button",doLogin),$("#side-bar").on("keypress","#login .input",function(e){13==e.which&&doLogin()}),$("#side-bar").on("click","#reset .button",doReset),$("#side-bar").on("keypress","#reset .input",function(e){13==e.which&&doReset()}),$("#side-bar").on("click","#forgot .button",doForgot),$("#side-bar").on("keypress","#forgot .input",function(e){13==e.which&&doForgot()}),$("form").submit(function(){return!1}),$("#side-bar").on("click","#logout",function(){$.ajax({url:"php/logout.php"}).done(function(e){K.user.name=!1,K.user.type=0,K.user.data=!1,$("#side-bar .login .box-content").parent().html(e),pageLoad()})}),$("#side-bar").on("click","#rem-check",function(){$.ajax({type:"POST",url:"php/validator.php",data:{checked:$(this).prop("checked")}})}),$(document).on("mousedown touchstart",function(e){if(K.check.grabbing)return;const o=$(".settings-divider, .switch-active-group, #slider-box, .group-switch, .context-menu");o.is(e.target)||0!==o.has(e.target).length||$(o).remove(),$(".map-mode-box").hasClass("active")&&!$(e.target).hasClass("map-mode")&&$(".map-mode-box").removeClass("active")}),$("#side-bar").on("focus",".login .input",function(){$("."+$(this).attr("name")).show(500)}).on("blur",".login .input",function(){$("."+$(this).attr("name")).hide(500)}).on("propertychange change click keyup input paste",".login .input",function(){let e=$(this),o=e.attr("id"),t=e.val(),a=!1;"email"==o||"donator"==o?a=t.bMatch(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/):"username"==o?a=t.bMatch(/^\w+$/):"password"==o?a=t.bMatch(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/):"confirmpwd"==o&&(a=t==$("#password").val()),e.addClass("incorrect"),a&&e.removeClass("incorrect")}),$("#side-bar .bar-toggle").on("mouseenter touchstart",function(){$(this).css("left","-"+($(this).width()+50)+"px")}).on("mouseleave touchmove click",function(){$(this).css("left","-35px")}),void 0!==K.local("powered")&&(K.check.doOnce=!K.local("powered")),"string"==K.type(K.urlParam("d"))&&$.ajax({type:"POST",url:"php/process_donator.php",data:{load:K.urlParam("d")}}).done(function(){window.location.href=window.location.href.split("?")[0]}),$.getJSON("data/modes.json",function(e){const o=$(".bar-box.mode .box-content");o.append($("<span />",{class:"title",text:"Map Modes"})),K.each(e,function(){$("<div />",{class:"mode-wrap ripple-me"+(this.name==K.local("mode")?" active":""),mode:this.name}).append($("<img />",{class:"mode-icon",src:this.icon})).append($("<span />",{class:"mode-name",text:this.name})).append($("<div />",{class:"mode-desc span-row",html:this.descriptor})).appendTo(o).on("click",function(){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),K.mode=$(this).attr("mode"),K.local("mode",K.mode),K.group.mode=K.group.feature[K.mode],!K.bar.b.power||K.bar.b.power.enabled()||(K.check.doOnce=!0),setTimeout(()=>{pageLoad()},1e3))})}),o.append($("<div />",{include:"docs/credits.html"}))}),$("body").on("click",".ripple-me",function(e){const o=$(".ripple"),t=e.pageX,a=e.pageY;let s,n;const i=function(e){n||(n=e);const r=e-n;if(r<600){const e=r/600*(2-r/600),n=`circle at ${t}px ${a}px`,c=`rgba(175, 101, 44, ${.3*(1-e)})`,l=10*e+"%";o.css({"background-image":"radial-gradient("+n+", "+c+" "+l+", transparent "+l+")"}),s=window.requestAnimationFrame(i)}else o.css({"background-image":"none"}),window.cancelAnimationFrame(s)};s=window.requestAnimationFrame(i)}),pageLoad()});
//# sourceMappingURL=index.min.js.map
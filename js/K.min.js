export const K={version:"1.0"};const arr=[],indexOf=arr.indexOf,isWindow=function(t){return null!=t&&t===t.window},class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object);K.Util={formatLatLngs:function(t,e=5){const n=Math.pow(10,e);switch(K.Util.type(t)){case"object":t.lat=Math.round(t.lat*n)/n,t.lng=Math.round(t.lng*n)/n;break;case"array":for(let n=0;n<t.length;n++)t[n]=K.Util.formatLatLngs(t[n],e);break;case"number":return Math.round(t*n)/n}return t},extend:function(){let t,e,n,i,r,o,s=arguments[0]||{},l=1,a=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||K.Util.isFunction(s)||(s={}),l===a&&(s=this,l--);l<a;l++)if(null!=(t=arguments[l]))for(e in t)n=s[e],s!==(i=t[e])&&(c&&i&&(K.Util.isPlainObject(i)||(r=K.Util.isArray(i)))?(r?(r=!1,o=n&&K.Util.isArray(n)?n:[]):o=n&&K.Util.isPlainObject(n)?n:{},s[e]=K.Util.extend(c,o,i)):void 0!==i&&(s[e]=i));return s},each:function(t,e){let n,i=0;if(isArrayLike(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?class2type[toString.call(t)]||"object":typeof t},isFunction:function(t){return"function"===K.Util.type(t)},isPlainObject:function(t){let e,n;return!(!t||"[object Object]"!==toString.call(t))&&(!(e=Object.getPrototypeOf(t))||"function"==typeof(n=hasOwn.call(e,"constructor")&&e.constructor)&&fnToString.call(n)===ObjectFunctionString)},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){const n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));const i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._k_id=t._k_id||++K.Util.lastId,t._k_id},lastId:0,throttle:function(t,e,n){let i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}},wrapNum:function(t,e,n){const i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r},falseFn:function(){return!1},formatNum:function(t,e){const n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return K.Util.trim(t).split(/\s+/)},setOptions:function(t,e){K.Util.in("options",t)||(t.options=t.options?K.Util.create(t.options):{});for(const n in e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){const i=[];for(const e in t)i.push(encodeURIComponent(n?e.toUpperCase():e)+"="+encodeURIComponent(t[e]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(K.Util.templateRe,function(t,n){let i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},templateRe:/\{ *([\w_-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(let n=0;n<t.length;n++)if(t[n]===e)return n;return-1},urlParam:function(t){const e={};let n=window.location.href.match(/\?([^#]*)/);return null==n?null:(n=n[1].split("&"),K.Util.each(n,function(t,n){n=n.split("="),e[n[0]]=decodeURI(n[1])}),e[t]||e)},curtail:function(){let t=arguments[0],e=arguments[1];return!Object.keys(t).length&&Object.keys(e).length&&(t=K.Util.extend({},arguments[1]),e=arguments[2]),e&&"object"!=typeof e&&(e=[e]),K.Util.each(e,function(e,n){n in t&&delete t[n]}),t},reduce:function(){let t=arguments[0],e=arguments[1];return!Object.keys(t).length&&Object.keys(e).length&&(t=K.Util.extend({},arguments[1]),e=arguments[2]),e&&"object"!=typeof e&&(e=[e]),K.Util.each(t,function(n){!K.Util.isInArray(n,e)&&delete t[n]}),t},inArray:(t,e,n)=>null==e?-1:indexOf.call(e,t,n),isInArray:(t,e)=>{switch(K.Util.type(e)){case"array":return-1!=K.Util.inArray(t,e);case"object":return t in e;default:return!1}},local:(t,e)=>{if(void 0===e)return void 0===t?localStorage:JSON.parse(localStorage.getItem(t));localStorage.setItem(t,JSON.stringify(e))},localRemove:t=>localStorage.removeItem(t),isIterable:function(t){return K.Util.isInArray(K.Util.type(t),["array","object"])},equals:(t,e)=>{const n=K.Util.type(t);if(n==K.Util.type(e))switch(n){case"array":if(K.Util.empty(t)&&K.Util.empty(e))return!0;if(t.length!=e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!K.isInArray(t[n],e))return!1;break;case"object":if(K.Util.empty(t)&&K.Util.empty(e))return!0;for(let n in t){if(!K.Util.isInArray(n,e))return!1;if(!K.Util.equals(t[n],e[n]))return!1}for(const n in e)if(void 0===t[n])return!1;break;case"number":case"string":case"boolean":if(t!=e)return!1;break;case"function":if(t.toString()!=e.toString())return!1;break;default:if(!t!=!e)return!1}else{if(K.Util.empty(t)&&K.Util.empty(e))return!0;switch(n){case"array":case"object":return!1;case"number":if(!t&&K.Util.isNull(e))return!0;if(t&&!e)return!1;case"string":case"boolean":if(t!=e)return!1;break;default:if(!t!=!e)return!1}}return!0},isNull:t=>K.Util.isInArray(K.Util.type(t),["null","undefined"]),length:t=>{const e=K.Util.type(t);return"object"==e?Object.keys(t).length:"array"==e?t.length:0},empty:t=>{switch(K.Util.type(t)){case"object":for(let e in t)return!1;return!0;case"array":return!t.length;case"number":case"boolean":return!1;default:return!t}},getPropByString:(t,e)=>{if(!e)return t;const n=e.split(".");let i=0;for(let e=n.length-1;i<e;i++){const e=t[n[i]];if(void 0===e)break;t=e}return t[n[i]]}},K.extend=K.Util.extend,K.isInArray=K.Util.isInArray,K.isArray=K.Util.isArray,K.has=K.Util.isInArray,K.in=K.Util.isInArray,K.curtail=K.Util.curtail,K.reduce=K.Util.reduce,K.urlParam=K.Util.urlParam,K.bind=K.Util.bind,K.stamp=K.Util.stamp,K.setOptions=K.Util.setOptions,K.each=K.Util.each,K.equals=K.Util.equals,K.isIterable=K.Util.isIterable,K.type=K.Util.type,K.length=K.Util.length,K.empty=K.Util.empty,K.local=K.Util.local,K.localRemove=K.Util.localRemove,K.getPropByString=K.Util.getPropByString,K.includeHTML=function(){let t,e,n,i,r;for(t=document.getElementsByTagName("*"),e=0;e<t.length;e++)if(i=(n=t[e]).getAttribute("include"))return(r=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200==this.status&&(n.innerHTML=this.responseText),404==this.status&&(n.innerHTML="Page not found."),n.removeAttribute("include"),K.includeHTML())},r.open("GET",i,!0),void r.send()},K.loadStyles=async function(t){let e=await Promise.all(t.map(t=>fetch(t)));e=await Promise.all(e.map(t=>t.text()));const n=document.createElement("style");n.textContent=e.reduce((t,e)=>t+e,""),document.head.appendChild(n)},K.Class=function(){},K.Class.extend=function(t){const e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,i=K.Util.create(n);i.constructor=e,e.prototype=i;for(const t in this)K.in(t,this)&&"prototype"!==t&&(e[t]=this[t]);return t.statics&&(K.extend(e,t.statics),delete t.statics),t.includes&&(K.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=K.Util.extend(K.Util.create(i.options),t.options)),K.extend(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(let t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},K.Class.include=function(t){return K.extend(this.prototype,t),this},K.Class.mergeOptions=function(t){return K.extend(this.prototype.options,t),this},K.Class.addInitHook=function(t){const e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},K.Evented=K.Class.extend({on:function(t,e,n){if("object"==typeof t)for(const n in t)this._on(n,t[n],e);else for(let i=0,r=(t=K.Util.splitWords(t)).length;i<r;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(const n in t)this._off(n,t[n],e);else for(let i=0,r=(t=K.Util.splitWords(t)).length;i<r;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};let i=this._events[t];i||(this._events[t]=i=[]),n===this&&(n=void 0);const r={fn:e,ctx:n},o=i;for(let t=0,i=o.length;t<i;t++)if(o[t].fn===e&&o[t].ctx===n)return;o.push(r)},_off:function(t,e,n){let i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){const o=i[r];if(o.ctx===n&&o.fn===e)return o.fn=K.Util.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=K.Util.falseFn;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;const i=K.Util.extend({},e,{type:t,target:this});if(this._events){const e=this._events[t];if(e){this._firingCount=this._firingCount+1||1;for(let t=0,n=e.length;t<n;t++){const n=e[t];n.fn.call(n.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){const n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(const n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(const n in t)this.once(n,t[n],e);return this}const i=K.bind(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[K.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[K.stamp(t)],this},_propagateEvent:function(t){for(const e in this._eventParents)this._eventParents[e].fire(t.type,K.extend({layer:t.target},t),!0)}});const proto=K.Evented.prototype;K.Mixin={Events:proto},K.isWindow=isWindow,K.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){class2type["[object "+e+"]"]=e.toLowerCase()});export function isArrayLike(t){const e=!!t&&"length"in t&&t.length,n=K.Util.type(t);return"function"!==n&&!K.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}let rnothtmlwhite=/[^\x20\t\r\n\f]+/g;export function classesToArray(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(rnothtmlwhite)||[]}export function stripAndCollapse(t){return(t.match(rnothtmlwhite)||[]).join(" ")}Array.prototype.removeDupes||(Array.prototype.removeDupes=function(){const t=[],e=[];return K.each(this,function(n,i){const r=JSON.stringify(i);K.isInArray(r,t)||(t.push(r),e.push(i))}),e}),String.prototype.filter||(String.prototype.filter=function(){const t=this.toString().split(" "),e=[];return t.clean(""),t.length<2?t[0]:(K.each(t,function(t,n){K.isInArray(n,e)||e.push(n)}),e.join(" "))}),Array.prototype.clean||(Array.prototype.clean=function(t){for(let e=0;e<this.length;e++)this[e]==t&&(this.splice(e,1),e--);return this}),Array.prototype.average||(Array.prototype.average=function(){if(this.length){return this.reduce((t,e)=>t+e)/this.length}return 0}),String.prototype.bMatch||(String.prototype.bMatch=function(t){return null!==this.toString().match(t)}),String.prototype.contains||(String.prototype.contains=function(t="",e=!1){let n=this.toString();return!e&&(n=n.toLowerCase(),t=t.toLowerCase()),-1!=n.indexOf(t)}),String.prototype.space||(String.prototype.space=function(){return this.toString().replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").trim()}),String.prototype.titleCase||(String.prototype.titleCase=function(){return this.toString().replace(/(?:^|\s)\w/g,function(t){return t.toUpperCase()})}),String.prototype.firstToUpper||(String.prototype.firstToUpper=function(){const t=this.toString();return t.substr(0,1).toUpperCase()+t.substr(1)}),String.prototype.equals||(String.prototype.equals=function(t,e=!1){if("string"!=K.type(t))return!1;let n=this.toString();return e||(n=n.toLowerCase(),t=t.toLowerCase()),n==t}),String.prototype.add||(String.prototype.add=function(t){let e,n,i,r,o=classesToArray(t),s=this.toString();if(o.length&&(e=` ${stripAndCollapse(n=s||"")} `)){for(r=0;i=o[r++];)e.indexOf(` ${i} `)<0&&(e+=i+" ");return stripAndCollapse(e)}return s}),String.prototype.remove||(String.prototype.remove=function(t){let e,n,i,r,o=classesToArray(t),s=this.toString();if(o.length&&(e=` ${stripAndCollapse(n=s||"")} `)){for(r=0;i=o[r++];)for(;e.indexOf(` ${i} `)>-1;)e=e.replace(` ${i} `," ");return stripAndCollapse(e)}return s}),String.prototype.get||(String.prototype.get=function(t){let e=this.toString().match(t);return K.empty(e)?"":e[0]}),Date.prototype.addHours||(Date.prototype.addHours=function(t){return this.setTime(this.getTime()+60*t*60*1e3),this}),Date.prototype.addMinutes||(Date.prototype.addMinutes=function(t){return this.setTime(this.getTime()+60*t*1e3),this});
//# sourceMappingURL=K.js.map
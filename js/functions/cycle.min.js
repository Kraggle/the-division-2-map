import{jQuery as $}from"../jQuery/jquery3.4.1.js";import{K}from"../K.js";K.cycle={init:!1,temp:[],groups:[],time:5e3,interval:!1,reset:function(){this.init=!1,this.temp=[],this.groups=[],this.interval&&(clearInterval(this.interval),this.interval=!1)},start:function(){this.init=!0,K.each(this.temp,function(t,i){K.cycle.add(i),i.showing=!0}),this.temp=[],this.interval&&(clearInterval(this.interval),this.interval=!1),this.interval=setInterval(()=>K.cycle.action(),this.time),this.action()},add:function(t){if(!t.options.cycle)return;if(!this.init)return void this.temp.push(t);let i=!0;if(K.each(this.groups,function(o,n){K.each(n,function(o,n){n===t&&(i=!1)})}),!i)return;const o=[t],n=t=>{t.cyclePoly=!1,"array"==K.type(t.options.link)&&K.each(t.options.link,function(i,o){const n=K.group.getLayer(o);n&&"marker"!=n.options.shape&&(t.cyclePoly=n)})};n(t),K.each(t.options.cycle,function(t,i){const e=K.group.getLayer(i);e&&(o.push(e),n(e))}),this.groups.push(o)},action:function(){for(let t=0;t<this.groups.length;t++){const i=this.groups[t],o=[];for(let t=0;t<i.length;t++){const n=i[t];!K.in("currentGroup",n)&&(n.currentGroup=n.options.group),K.in(n.currentGroup,["groupHidden","groupComplete"])||o.push(n)}const n=o[0];if(1==o.length){n.showing=!0,$(n._icon).show(),n.cyclePoly&&$(n.cyclePoly._path).show();continue}let e=!1,c=!1;for(let t=0;t<o.length;t++){const i=o[t];e?(i.showing=!0,$(i._icon).show(),i.cyclePoly&&$(i.cyclePoly._path).show(),e=!1,c=!0):i.showing&&(i.showing=!1,$(i._icon).hide(),i.cyclePoly&&$(i.cyclePoly._path).hide(),e=!0),o.length-1!=t||!e&&c||(n.showing=!0,$(n._icon).show(),n.cyclePoly&&$(n.cyclePoly._path).show())}}}};
//# sourceMappingURL=cycle.js.map
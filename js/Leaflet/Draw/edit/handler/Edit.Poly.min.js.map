{"version":3,"sources":["Edit.Poly.js"],"names":["L","Edit","Poly","Handler","extend","options","initialize","poly","this","latlngs","_latlngs","_holes","concat","_poly","setOptions","on","_updateLatLngs","_defaultShape","Polyline","_flat","_eachVertexHandler","callback","i","_verticesHandlers","length","addHooks","_initHandlers","handler","removeHooks","updateMarkers","push","PolyVerticesEdit","e","layer","icon","DivIcon","iconSize","Point","className","touchIcon","drawError","color","timeout","Browser","touch","Util","Polygon","fill","editing","setStyle","_map","_markerGroup","_initMarkers","addLayer","original","removeLayer","_markers","clearLayers","LayerGroup","j","len","marker","markerLeft","markerRight","_createMarker","_onMarkerClick","_createMiddleMarker","_updatePrevNext","latlng","index","Marker","Touch","draggable","_origLatLng","_index","_onMarkerDragStart","_onMarkerDrag","_fireEdit","_onTouchMove","fire","_spliceLatLngs","removed","splice","apply","arguments","_convertLatLngs","redraw","_removeMarker","_updateIndexes","off","edited","Draw","Event","EDITVERTEX","layers","target","_latlng","_middleLeft","setLatLng","_getMiddleLatLng","_prev","_middleRight","_next","tooltip","_editTooltip","allowIntersection","intersects","originalColor","version","indexOf","dragging","_draggable","_onUp","updateContent","text","drawLocal","draw","handlers","polyline","error","setTimeout","edit","subtext","minPoints","layerPoint","mouseEventToLayerPoint","originalEvent","touches","layerPointToLatLng","delta","eachLayer","marker1","marker2","onClick","onDragStart","onDragEnd","setOpacity","lat","getLatLng","lng","call","map","p1","project","p2","unproject","_add","_divideBy","addInitHook","editable","enable","enabled"],"mappings":"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","file":"Edit.Poly.js"}